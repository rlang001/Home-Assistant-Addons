<!DOCTYPE html>
<html lang="en">
  <head>
    <title>WeeWX Reports Config</title>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
    />
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>

    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css"
    />
  </head>
  <body>
    <!-- Header -->

    <div class="p-1 bg-primary text-white text-center">
      <h3>Reports Settings</h3>
    </div>

    <div class="p-1 text-center">
      <h4>This section specifies what reports to generate.</h4>
    </div>

    <br />
    <br />
    <!-- Choices -->
    <div class="container">
      <form name="reports" method="post" id="reports-form">
        <!--  -->

        <div class="row">
          <div class="col-sm-3">
            <label for="defaultreport">Default Report:</label>
          </div>
          <div class="col-sm-3">
            <select class="form-select" id="defaultreport" name="defaultreport">
              <option value="amphibian">Amphibian</option>
              <option value="belchertown">Belchertown</option>
              <option value="jas">JAS</option>
              <option value="neowxmaterial">NeoWX-Material</option>
              <option value="nws">NWS</option>
              <option value="seasons">Seasons</option>
              <option value="simple">Simple</option>
              <option value="smartphone">Smartphone</option>
              <option value="ss">Steel Series</option>
              <option value="wdc">WDC</option>
            </select>
          </div>
          <div class="col-sm-6">
            <label for="defaultreport"></label>
          </div>
        </div>
        <div class="row">
          <div class="col-sm-12"></div>
        </div>

        <!-- Amphibian -->
        <div class="row">
          <div class="col-sm-3">
            <label for="amphibian">Amphibian</label>
          </div>
          <div class="col-sm-1">
            <input
              class="form-check-input"
              type="checkbox"
              id="amphibian"
              name="amphibian"
            />
          </div>
          <div class="col-sm-8">
            <label for="amphibian"
              ><a
                href="https://github.com/weewx/weewx/wiki/amphibian"
                target="_blank"
                >Amphibian Report</a
              ></label
            >
          </div>
        </div>

        <!-- Belchertown -->
        <div class="row">
          <div class="col-sm-3">
            <label for="belchertown">Belchertown Report:</label>
          </div>
          <div class="col-sm-1">
            <input
              class="form-check-input"
              type="checkbox"
              id="belchertown"
              name="belchertown"
            />
          </div>
          <div class="col-sm-8">
            <label for="belchertown"
              ><a
                href="https://github.com/poblabs/weewx-belchertown"
                target="_blank"
                >Belchertown Report</a
              ></label
            >
          </div>
        </div>

        <!-- JAS -->
        <div class="row">
          <div class="col-sm-3">
            <label for="jas">JAS Report:</label>
          </div>
          <div class="col-sm-1">
            <input
              class="form-check-input"
              type="checkbox"
              id="jas"
              name="jas"
            />
          </div>
          <div class="col-sm-8">
            <label for="jas"
              ><a href="https://github.com/bellrichm/weewx-jas" target="_blank"
                >JAS Report</a
              ></label
            >
          </div>
        </div>

        <!-- NeoWX-Material -->
        <div class="row">
          <div class="col-sm-3">
            <label for="neowxmaterial">NeoWX-Material:</label>
          </div>
          <div class="col-sm-1">
            <input
              class="form-check-input"
              type="checkbox"
              id="neowxmaterial"
              name="neowxmaterial"
            />
          </div>
          <div class="col-sm-8">
            <label for="neowxmaterial"
              ><a
                href="https://neoground.com/projects/neowx-material"
                target="_blank"
                >NeoWX-Material Report</a
              ></label
            >
          </div>
        </div>

        <!-- NWS -->
        <div class="row">
          <div class="col-sm-3"><label for="nws">NWS:</label></div>
          <div class="col-sm-1">
            <input
              class="form-check-input"
              type="checkbox"
              id="nws"
              name="nws"
            />
          </div>
          <div class="col-sm-8">
            <label for="nws"
              ><a href="https://github.com/chaunceygardiner/weewx-nws"
                >NWS Report</a
              >
            </label>
          </div>
        </div>

        <!-- Seasons -->
        <div class="row">
          <div class="col-sm-3"><label for="seasons">Seasons:</label></div>
          <div class="col-sm-1">
            <input
              class="form-check-input"
              type="checkbox"
              id="seasons"
              name="seasons"
              onclick="setChecks(this.id)"
            />
          </div>
          <div class="col-sm-8">
            <label for="seasons">
              <a
                href="https://github.com/scottgrey/weewx-Seasons"
                target="_blank"
                >Seasons Report</a
              >
            </label>
          </div>
        </div>

        <!-- Simple -->
        <div class="row">
          <div class="col-sm-3"><label for="simple">Simple:</label></div>
          <div class="col-sm-1">
            <input
              class="form-check-input"
              type="checkbox"
              id="simple"
              name="simple"
              onclick="setChecks(this.id)"
            />
          </div>
          <div class="col-sm-8">
            <label for="simple"
              ><a
                href="https://github.com/matthewwall/weewx-simple"
                target="_blank"
                >Simple Report</a
              ></label
            >
          </div>
        </div>

        <!-- Smartphone -->
        <div class="row">
          <div class="col-sm-3">
            <label for="smartphone">Smartphone:</label>
          </div>
          <div class="col-sm-1">
            <input
              class="form-check-input"
              type="checkbox"
              id="smartphone"
              name="smartphone"
            />
          </div>
          <div class="col-sm-8">
            <label for="smartphone"
              ><a href="http://www.weewx,com" target="_blank"
                >Smartphone Report</a
              >
            </label>
          </div>
        </div>

        <!-- Steel Series -->
        <div class="row">
          <div class="col-sm-3">
            <label for="ss">Steel Series:</label>
          </div>
          <div class="col-sm-1">
            <input class="form-check-input" type="checkbox" id="ss" name="ss" />
          </div>
          <div class="col-sm-8">
            <label for="ss"
              ><a
                href="https://github.com/gjr80/weewx-steelseries"
                target="_blank"
                >Steel Series Report</a
              >
            </label>
          </div>
        </div>

        <!-- WDC -->
        <div class="row">
          <div class="col-sm-3">
            <label for="wdc">WDC:</label>
          </div>
          <div class="col-sm-1">
            <input
              class="form-check-input"
              type="checkbox"
              id="wdc"
              name="wdc"
            />
          </div>
          <div class="col-sm-8">
            <label for="wdc">
              <a href="https://github.com/Daveiano/weewx-wdc" target="_blank"
                >WDC Report</a
              >
            </label>
          </div>
        </div>

        <div class="row">
          <div class="col-sm-5"></div>
          <div class="col-sm-2">
            <button class="btn btn-primary" type="submit">submit</button>
          </div>
          <div class="col-sm-5"></div>
        </div>
      </form>
    </div>

    <!-- Modal popup -->
    <!-- The Modal -->
    <div class="modal" id="myModal">
      <div class="modal-dialog">
        <div class="modal-content">
          <!-- Modal Header -->
          <div class="modal-header">
            <h4 class="modal-title">Station Settings</h4>
            <button
              type="button"
              class="btn-close"
              data-bs-dismiss="modal"
            ></button>
          </div>

          <!-- Modal body -->
          <div class="modal-body">Settings saved...</div>

          <!-- Modal footer -->
          <div class="modal-footer">
            <button type="button" class="btn-primary" data-bs-dismiss="modal">
              Close
            </button>
          </div>
        </div>
      </div>
    </div>

    <script type="text/javascript">
      function setCookie(name, value, days) {
        var expires = "";
        if (days) {
          var date = new Date();
          date.setTime(date.getTime() + days * 24 * 60 * 60 * 1000);
          expires = "; expires=" + date.toUTCString();
        }
        document.cookie = name + "=" + (value || "") + expires + "; path=/";
      }
      function getCookie(name) {
        var nameEQ = name + "=";
        var ca = document.cookie.split(";");
        for (var i = 0; i < ca.length; i++) {
          var c = ca[i];
          while (c.charAt(0) == " ") c = c.substring(1, c.length);
          if (c.indexOf(nameEQ) == 0)
            return c.substring(nameEQ.length, c.length);
        }
        return null;
      }
      function eraseCookie(name) {
        document.cookie =
          name + "=; Path=/; Expires=Thu, 01 Jan 1970 00:00:01 GMT;";
      }
    </script>

    <script
      src="https://code.jquery.com/jquery-3.5.1.js"
      integrity="sha256-QWo7LDvxbWT2tbbQ97B53yJnYU3WhH/C8ycbRAkjPDc="
      crossorigin="anonymous"
    ></script>

    <script type="text/javascript">
      window.onload = function () {
        x = getCookie("defaultreport");

        if (x) {
          document.getElementById("defaultreport").value = x;
        } else {
          document.getElementById("defaultreport").value = "simple";
        }

        document.getElementById("amphibian").checked =
          "{{amphibian}}".toLowerCase() == "true" ? true : false;
        document.getElementById("belchertown").checked =
          "{{belchertown}}".toLowerCase() == "true" ? true : false;
        document.getElementById("jas").checked =
          "{{jas}}".toLowerCase() == "true" ? true : false;
        document.getElementById("neowxmaterial").checked =
          "{{neowxmaterial}}".toLowerCase() == "true" ? true : false;
        document.getElementById("nws").checked =
          "{{nws}}".toLowerCase() == "true" ? true : false;
        document.getElementById("seasons").checked =
          "{{seasons}}".toLowerCase() == "true" ? true : false;
        document.getElementById("simple").checked =
          "{{simple}}".toLowerCase() == "true" ? true : false;
        document.getElementById("smartphone").checked =
          "{{smartphone}}".toLowerCase() == "true" ? true : false;
        document.getElementById("ss").checked =
          "{{ss}}".toLowerCase() == "true" ? true : false;
        document.getElementById("wdc").checked =
          "{{wdc}}".toLowerCase() == "true" ? true : false;
      };
    </script>

    <!-- -->
    <script type="text/javascript">
      $(document).on("submit", "#reports-form", function (e) {
        e.preventDefault();

        defaultreport = $("#defaultreport").val();

        //setCookie("defaultreport", $("input#defaultreport").val(), 7);
        setCookie("defaultreport", defaultreport, 7);

        $.ajax({
          type: "POST",
          url: "/configuration/stdreports",
          data: {
            defaultreport: $("#defaultreport").val(),
            amphibian: $("input#amphibian").prop("checked") ? "true" : "false",
            belchertown: $("input#belchertown").prop("checked")
              ? "true"
              : "false",
            jas: $("input#jas").prop("checked") ? "true" : "false",
            neowxmaterial: $("input#neowxmaterial").prop("checked")
              ? "true"
              : "false",
            nws: $("input#nws").prop("checked") ? "true" : "false",
            seasons: $("input#seasons").prop("checked") ? "true" : "false",
            simple: $("input#simple").prop("checked") ? "true" : "false",
            smartphone: $("input#smartphone").prop("checked")
              ? "true"
              : "false",
            ss: $("input#ss").prop("checked") ? "true" : "false",
            wdc: $("input#wdc").prop("checked") ? "true" : "false",
          },
          success: function () {
            myModal = new bootstrap.Modal(document.getElementById("myModal"), {
              keyboard: false,
            });

            myModal.show();
          },
        });
      });
    </script>
  </body>
</html>
